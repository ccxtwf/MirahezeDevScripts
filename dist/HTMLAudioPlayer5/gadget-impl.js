(function(j){j.loader.impl(function(){return["ext.gadget.store.HTMLAudioPlayer5@50f435ac",function(f,S,q,z){(function(s){"use strict";var N;function A(o){o[0].querySelectorAll(".html5audio:not(.loaded)").forEach(function(n){var t=n.dataset,a=[],l=[];for(var r in t)if(r.startsWith("file")){var m=r.substring(4),b=parseInt(m.substring(1))||(m===""?0:null);b!=null&&(a[b]=t[r])}a=a.filter(function(d){return d});for(var c=0;c<a.length;c++){var O=a[c],i;if(i=t["fileType"+(c>0?"-"+c:"")],!i){var g=a[c],x=g.lastIndexOf("?");x!=-1&&(g=g.substring(0,x));var h=g.lastIndexOf(".");h!=-1&&g.length-(h+1)<=4&&(i=g.substring(h+1))}i&&i.length>0&&(i=="mp3"&&(i="mpeg"),i.startsWith("audio/")||(i="audio/"+i));var y=document.createElement("source");y.src=O,i&&(y.type=i),l.push(y)}if(l.length!=0){var L=t.preload,V=t.download,F=t.options,v={controls:""},E=Number(Number(t.volume).toFixed(1)),M=parseFloat(t.start),T=parseFloat(t.end),p=parseFloat(t.repeatStart),u=parseFloat(t.repeatEnd);if(L!=="auto"&&L!=="metadata"&&(L="none"),v.preload=L,V==="false"&&(v.controlsList="nodownload"),F){var W=["autoplay","loop","muted"];F.split(",").forEach(function(d){d=d.trim(),W.indexOf(d)!==-1&&(v[d]="")})}var e=document.createElement("audio");if(Object.keys(v).forEach(function(d){var _=v[d];e.setAttribute(d,_)}),isNaN(M)||(e.currentTime=M),!isNaN(T)){var k=function(){e.currentTime>=T&&(e.seeking||e.pause(),e.removeEventListener("timeupdate",k))};e.addEventListener("timeupdate",k)}if(!isNaN(p)||!isNaN(u)){(isNaN(p)||p<0)&&(p=0),e.addEventListener("loadedmetadata",function(){(isNaN(u)||u>e.duration)&&(u=e.duration),p==0&&u==e.duration?(e.removeEventListener("timeupdate",U),e.removeEventListener("seeking",I),e.removeEventListener("ended",P),e.setAttribute("loop",""),w=!1):u>e.duration-.25&&e.removeAttribute("loop")});var w=!0,U=function(){w&&(e.paused&&!e.ended||e.currentTime>=u&&(e.currentTime=p))},I=function(){w=e.currentTime<u},P=function(){e.play()};e.addEventListener("ended",P),e.addEventListener("timeupdate",U),e.addEventListener("seeking",I)}Element.prototype.replaceChildren.apply(e,l),e.append(N("text").escape()),E>=0&&E<=1&&(e.volume=E),n.innerHTML="",n.appendChild(e),n.classList.add("loaded")}})}function C(o){var n=s.Message;n.prototype.constructor=s.Message.prototype.constructor;var t={_i18nLoader:o,msg:function(){var a=Array.prototype.slice.call(arguments);if(a.length!==0){var l=a.shift();return new n(this._i18nLoader.getMessages(),l,a)}}};return["setTempLang","setDefaultLang"].forEach(function(a){t[a]=t._i18nLoader[a].bind(t._i18nLoader)}),["useLang","usePageLang","useContentLang","usePageViewLang","useUserLang","inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(a){t[a]=t._i18nLoader[a].bind(t)}),t}function D(){var o=new f.Deferred,n=new f.Deferred;function t(){var r=f.Deferred();return s.loader.using("ext.gadget.store.FandoomUtilsI18nLoader").done(function(m){r.resolve(m("ext.gadget.store.FandoomUtilsI18nLoader"))}).fail(r.reject),r}function a(r){return r.loadMessages("HTMLAudioPlayer5",{})}function l(r){o.resolve(r)}return n.then(t).then(a).then(l).catch(function(r){console.error(r),o.resolve(H())}),s.loader.getState("ext.gadget.store.FandoomUtilsI18nLoader")?n.resolve():f.ajax({dataType:"script",cache:!0,url:"https://cdn.jsdelivr.net/gh/ccxtwf/MirahezeDevScripts@dist/dist/FandoomUtilsI18nLoader/gadget-impl.js"}).done(function(){n.resolve()}).fail(n.reject),o}function H(){console.warn("[FandoomUtilsI18nLoader] Failed to load messages. Using fallback messages instead.");var o=new s.Map;o.set({text:"Your browser does not support the &lt;audio&gt; tag."}),s.Message.prototype.escape===void 0&&(s.Message.prototype.escape=s.Message.prototype.escaped);var n={getMessages:function(){return o}};return["setDefaultLang","setTempLang","useLang","usePageLang","useContentLang","usePageViewLang","useUserLang"].forEach(function(t){n[t]=f.noop}),["inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(t){n[t]=function(){return this}}),n}D().then(function(o){var n=C(o);N=n.msg.bind(n),s.hook("wikipage.content").add(A)})})(window.mediaWiki)},{css:[]},{},{},null]})})(mediaWiki);
