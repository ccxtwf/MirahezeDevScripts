(function(m){m.loader.impl(function(){return["ext.gadget.store.Countdown@667bbda4",function(k,L,C,D){(function(h,d,i){"use strict";var s=[],p=1,f=2,v=4,c;function u(o,e,t){var n=t?o+"-short":d.language.convertPlural(e,[o,o+"s",o+"s2"]),a=c.msg(n).plain();return t?a:" "+a}function l(o,e){var t,n,a=[],r=!!(s[o].opts&f);if(t=e%60,n=u("second",t,r),a.unshift(t+n),e=Math.floor(e/60),t=e%60,n=u("minute",t,r),a.unshift(t+n),e=Math.floor(e/60),t=e%24,n=u("hour",t,r),a.unshift(t+n),e=Math.floor(e/24),n=u("day",e,r),a.unshift(e+n),n=a.pop(),s[o].opts&p)for(;a.length&&a[0][0]==="0";)a.shift();s[o].opts&v&&(a=a.filter(function(g){return g[0]!=="0"})),a.length&&(s[o].opts&f?n=a.join(" ")+" "+n:n=a.join(", ")+" "+c.msg("and").plain()+" "+n),s[o].node.text(n)}function y(o){var e=s[o].node.parents(".countdown").first();switch(e.attr("data-end")){case"remove":return e.remove(),!0;case"stop":return l(o,0),!0;case"toggle":var t=e.attr("data-toggle");if(t&&t==="next")return e.next().css("display","inline"),e.css("display","none"),!0;if(t&&i(t).length)return i(t).css("display","inline"),e.css("display","none"),!0;break;case"callback":var n=e.attr("data-callback");if(n&&i.isFunction(h[n]))return l(o,0),h[n].call(e),!0;break}return s[o].countup=!0,l(o,0),!1}function w(){var o=Date.now(),e=[];i.each(s.slice(0),function(n,a){var r=Math.floor((a.date-o)/1e3);r<=0&&!a.countup?y(n)&&e.push(n):l(n,Math.abs(r))});for(var t;(t=e.pop())!==void 0;)s.splice(t,1);s.length&&window.setTimeout(function(){w()},1e3)}function b(o){var e=o.parents(".countdown").first(),t=e.attr("data-options"),n=0;return t&&(/no-leading-zeros/.test(t)&&(n|=p),/short-format/.test(t)&&(n|=f),/no-zeros/.test(t)&&(n|=v)),n}function x(){var o=i("body").find(".countdown:not(.handled)");o.length&&(i("body").find(".nocountdown").css("display","none"),o.css("display","inline").find(".countdowndate").each(function(){var e=i(this),t=new Date(e.text()).valueOf();if(isNaN(t)){e.text(c.msg("bad-date").plain());return}s.push({node:e,opts:b(e),date:t})}),o.addClass("handled"),s.length&&w())}j().done(function(o){c=M(o),d.hook("wikipage.content").add(x)}).fail(function(){console.error("[Countdown] Failed to fetch FandoomUtilsI18nLoader. The gadget will not execute.")});function M(o){var e=d.Message;e.prototype.constructor=d.Message.prototype.constructor;var t={_i18nLoader:o,msg:function(){var n=Array.prototype.slice.call(arguments);if(n.length!==0){var a=n.shift();return new e(this._i18nLoader.getMessages(),a,n)}}};return["setTempLang","setDefaultLang"].forEach(function(n){t[n]=t._i18nLoader[n].bind(t._i18nLoader)}),["useLang","usePageLang","useContentLang","usePageViewLang","useUserLang","inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(n){t[n]=t._i18nLoader[n].bind(t)}),t}function j(){var o=new i.Deferred,e=new i.Deferred;function t(){var r=i.Deferred();return d.loader.using("ext.gadget.store.FandoomUtilsI18nLoader").done(function(g){r.resolve(g("ext.gadget.store.FandoomUtilsI18nLoader"))}).fail(r.reject),r}function n(r){return r.loadMessages("Countdown",{})}function a(r){r.useContentLang(),o.resolve(r)}return e.then(t).then(n).then(a).catch(function(r){console.error(r),o.reject()}),d.loader.getState("ext.gadget.store.FandoomUtilsI18nLoader")?e.resolve():i.ajax({dataType:"script",cache:!0,url:"https://cdn.jsdelivr.net/gh/ccxtwf/MirahezeDevScripts@v0.0.3/dist/FandoomUtilsI18nLoader/gadget-impl.js"}).done(function(){e.resolve()}).fail(e.reject),o}})(window.countdownTimer=window.countdownTimer||{},mediaWiki,L)},{css:[]},{},{},null]})})(mediaWiki);
