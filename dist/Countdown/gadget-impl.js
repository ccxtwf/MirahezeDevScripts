(function(m){m.loader.impl(function(){return["ext.gadget.store.Countdown@42e096d1",function(D,w,P,C){(function(h,d,r){"use strict";var i=[],p=1,l=2,v=4,u;function c(o,n,e){var t=e?o+"-short":d.language.convertPlural(n,[o,o+"s",o+"s2"]),a=u.msg(t).plain();return e?a:" "+a}function g(o,n){var e,t,a=[],s=!!(i[o].opts&l);if(e=n%60,t=c("second",e,s),a.unshift(e+t),n=Math.floor(n/60),e=n%60,t=c("minute",e,s),a.unshift(e+t),n=Math.floor(n/60),e=n%24,t=c("hour",e,s),a.unshift(e+t),n=Math.floor(n/24),t=c("day",n,s),a.unshift(n+t),t=a.pop(),i[o].opts&p)for(;a.length&&a[0][0]==="0";)a.shift();i[o].opts&v&&(a=a.filter(function(f){return f[0]!=="0"})),a.length&&(i[o].opts&l?t=a.join(" ")+" "+t:t=a.join(", ")+" "+u.msg("and").plain()+" "+t),i[o].node.text(t)}function y(o){var n=i[o].node.parents(".countdown").first();switch(n.attr("data-end")){case"remove":return n.remove(),!0;case"stop":return g(o,0),!0;case"toggle":var e=n.attr("data-toggle");if(e&&e==="next")return n.next().css("display","inline"),n.css("display","none"),!0;if(e&&r(e).length)return r(e).css("display","inline"),n.css("display","none"),!0;break;case"callback":var t=n.attr("data-callback");if(t&&r.isFunction(h[t]))return g(o,0),h[t].call(n),!0;break}return i[o].countup=!0,g(o,0),!1}function L(){var o=Date.now(),n=[];r.each(i.slice(0),function(t,a){var s=Math.floor((a.date-o)/1e3);s<=0&&!a.countup?y(t)&&n.push(t):g(t,Math.abs(s))});for(var e;(e=n.pop())!==void 0;)i.splice(e,1);i.length&&window.setTimeout(function(){L()},1e3)}function M(o){var n=o.parents(".countdown").first(),e=n.attr("data-options"),t=0;return e&&(/no-leading-zeros/.test(e)&&(t|=p),/short-format/.test(e)&&(t|=l),/no-zeros/.test(e)&&(t|=v)),t}function b(){var o=r("body").find(".countdown:not(.handled)");o.length&&(r("body").find(".nocountdown").css("display","none"),o.css("display","inline").find(".countdowndate").each(function(){var n=r(this),e=new Date(n.text()).valueOf();if(isNaN(e)){n.text(u.msg("bad-date").plain());return}i.push({node:n,opts:M(n),date:e})}),o.addClass("handled"),i.length&&L())}U().done(function(o){u=x(o),d.hook("wikipage.content").add(b)});function x(o){var n=d.Message;n.prototype.constructor=d.Message.prototype.constructor;var e={_i18nLoader:o,msg:function(){var t=Array.prototype.slice.call(arguments);if(t.length!==0){var a=t.shift();return new n(this._i18nLoader.getMessages(),a,t)}}};return["setTempLang","setDefaultLang"].forEach(function(t){e[t]=e._i18nLoader[t].bind(e._i18nLoader)}),["useLang","usePageLang","useContentLang","usePageViewLang","useUserLang","inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(t){e[t]=e._i18nLoader[t].bind(e)}),e}function U(){var o=new r.Deferred,n=new r.Deferred;function e(){var s=r.Deferred();return d.loader.using("ext.gadget.store.FandoomUtilsI18nLoader").done(function(f){s.resolve(f("ext.gadget.store.FandoomUtilsI18nLoader"))}).fail(s.reject),s}function t(s){return s.loadMessages("Countdown",{})}function a(s){s.useContentLang(),o.resolve(s)}return n.then(e).then(t).then(a).catch(function(s){console.error(s),o.resolve(k())}),d.loader.getState("ext.gadget.store.FandoomUtilsI18nLoader")?n.resolve():r.ajax({dataType:"script",cache:!0,url:"https://cdn.jsdelivr.net/gh/ccxtwf/MirahezeDevScripts@v0.0.2/dist/FandoomUtilsI18nLoader/gadget-impl.js"}).done(function(){n.resolve()}).fail(n.reject),o}function k(){console.warn("[FandoomUtilsI18nLoader] Failed to load messages. Using fallback messages instead.");var o=new d.Map;o.set({and:"and",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days","bad-date":"Invalid Date","second-short":"s","minute-short":"m","hour-short":"h","day-short":"d",seconds2:"seconds",minutes2:"minutes",hours2:"hours",days2:"days"}),d.Message.prototype.escape===void 0&&(d.Message.prototype.escape=d.Message.prototype.escaped);var n={getMessages:function(){return o}};return["setDefaultLang","setTempLang","useLang","usePageLang","useContentLang","usePageViewLang","useUserLang"].forEach(function(e){n[e]=r.noop}),["inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(e){n[e]=function(){return this}}),n}})(window.countdownTimer=window.countdownTimer||{},mediaWiki,w)},{css:[]},{},{},null]})})(mediaWiki);
