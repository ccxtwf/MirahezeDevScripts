(function(l){l.loader.impl(function(){return["ext.gadget.store.FandoomUiUtilsModal@9b9c035c",function(a,f,y,m){(function(){if(window.dev=window.dev||{},window.dev.modal)return;var n={modals:{}},d=["small","medium","large","larger","content-size","full"];function c(){n._windowManager=new OO.ui.WindowManager({classes:["modal-js-window"]}),a(document.body).append(n._windowManager.$element),l.hook("dev.modal").fire(n)}function s(t){this.primary=!!t.primary,this.safe=!!(t.close||t.safe),this.back=!!t.back,this.close=!!t.close,this.type="button",this.setText(t.text||t.value).setEvent(t.event).setClasses(t.classes).setID(t.id).setDisabled(t.disabled).setSprite(t.sprite||t.imageClass).setHref(t.href).setTitle(t.title).setTarget(t.target).setName(t.name)}s.prototype.setClasses=function(t){return this.classes=t instanceof Array?t:[],this},s.prototype.setDisabled=function(t){return this.disabled=!!t,this},s.prototype.setEvent=function(t){return typeof t=="string"&&(this.event=t),this},s.prototype.setHref=function(t){return this.type==="link"&&typeof t=="string"&&(this.href=t),this},s.prototype.setID=function(t){return typeof t=="string"&&(this.id=t),this},s.prototype.setName=function(t){if(this.type==="input")if(typeof t=="string")this.name=t;else throw new Error("`name` parameter required!");return this},s.prototype.setText=function(t){if(typeof t!="string")throw new Error("No text specified!");return this.text=t,this},s.prototype.setType=function(t){return this},s.prototype.setSprite=function(t){return(this.type==="link"||this.type==="button")&&typeof t=="string"&&(this.sprite=t),this},s.prototype.setTarget=function(t){return this.type==="link"&&typeof t=="string"&&(this.target=t),this},s.prototype.setTitle=function(t){return this.type==="link"&&typeof t=="string"&&(this.title=t),this},s.prototype.create=function(){var t=[];["primary","safe","back","close"].forEach(function(i){this[i]&&t.push(i)},this);var o={action:this.event,classes:this.classes,disabled:this.disabled,flags:t,href:this.href,target:this.target,icon:this.sprite,id:this.id,label:this.text,title:this.title};return o};function p(t){return typeof t!="object"?!1:new s(t)}function u(t){return t.create()}function e(t){if(typeof t.id!="string")throw new Error("Modal ID must be specified!");if(n.modals[t.id])throw new Error("Modal with same ID already registered!");this.id=t.id,this.context=t.context||this,this.setSize(t.size).setContent(t.content).setTitle(t.title,t.isHTML).setCloseTitle(t.closeTitle).setButtons(t.buttons).setEvents(t.events).setClass(t.class||t.classes).setClose(t.close).setCloseEscape(t.closeEscape),n.modals[this.id]=this}e.prototype.deps={OO:null},e.prototype.setButtons=function(t){return this.buttons=t instanceof Array?t.map(p).filter(Boolean):[],this.buttons.push(new s({close:!0,text:this.closeTitle,title:this.closeTitle})),this},e.prototype.setClass=function(t){return t instanceof Array?this.classes=t:typeof t=="string"&&(this.classes=[t]),this},e.prototype.setClasses=e.prototype.setClass,e.prototype.setClose=function(t){return typeof t=="function"&&(this.closeFunc=t),this},e.prototype.setCloseEscape=function(t){return this.closeEscape=t!==!1,this},e.prototype.setCloseTitle=function(t){return this.closeTitle=typeof t=="string"?t:l.message("ooui-dialog-message-reject").plain(),this},e.prototype.setContent=function(t){if(typeof t=="string"||typeof t=="object"&&t instanceof e.prototype.deps.OO.ui.Layout)this.content=t;else if(t instanceof Node)this.content=t;else if(typeof t=="object"&&typeof window.dev.ui=="function")this.content=window.dev.ui(t);else throw new Error("Modal content not specified!");return this._modal&&(this.content instanceof e.prototype.deps.OO.ui.Layout?(this._modal.content.$element.remove(),this._modal.content=this.content,this._modal.$body.append(this.content.$element)):this._modal.content.$element.html(this.content)),this},e.prototype.setEvent=function(t,o){return this.events[t]=this.events[t]||[],typeof o=="function"?this.events[t].push(o.bind(this.context)):typeof o=="string"&&this.context&&typeof this.context[o]=="function"&&this.events[t].push(this.context[o].bind(this.context)),this},e.prototype.setEvents=function(t){if(this.events={},typeof t!="object")return this;for(var o in t)if(t[o]instanceof Array)for(var i=0,r=o.length;i<r;++i)this.setEvent(o,t[o][i]);else this.setEvent(o,t[o]);return this},e.prototype.setSize=function(t){return d.indexOf(t)===-1?this.size="medium":t==="content-size"?this.size="full":this.size=t,this._modal&&this._modal.setSize(this.size),this},e.prototype.setTitle=function(t,o){return this.title=typeof t=="string"?t:"Modal",this.titleIsHTML=!!o,this._modal&&!o&&(this._modal.title.setLabel(this.title),this._modal.constructor.static.title=this.title),this},e.prototype.filterActionButtons=function(t){var o=void 0,i=[];typeof t=="string"?i=[t]:t instanceof Array?i=t:typeof t=="object"&&((t.actions!==void 0||t.flags!==void 0)&&(o={actions:t.actions,flags:t.flags}),i=[t.id]);var r=this._modal.actions.get(o);return i.length===0?r:r.filter(function(h){return i.indexOf(h.getElementId())>-1})},e.prototype.disableActionButtons=function(t){return this.filterActionButtons(t).forEach(function(o){o.setDisabled(!0)}),this},e.prototype.enableActionButtons=function(t){return this.filterActionButtons(t).forEach(function(o){o.setDisabled(!1)}),this},e.prototype.toggleActionButtons=function(t){return this.filterActionButtons(t).forEach(function(o){var i=o.isDisabled();o.setDisabled(!i)}),this},e.prototype.create=function(){this._loading=new a.Deferred;var t=function(i){this._modal=i.modal,delete i.modal,t.super.call(this,i)};e.prototype.deps.OO.inheritClass(t,e.prototype.deps.OO.ui.ProcessDialog);var o=t.super.prototype;return t.static.name=this.id,t.static.title=this.title,t.static.actions=this.buttons.map(u),t.prototype.initialize=function(){o.initialize.apply(this,arguments),this._modal.content instanceof e.prototype.deps.OO.ui.Layout?this.content=this._modal.content:this.content=new e.prototype.deps.OO.ui.PanelLayout({expanded:!1,padded:!1}),this.content.$element.append(this._modal.content),this.$body.append(this.content.$element)},t.prototype.getActionProcess=function(i){var r=this._modal.events[i];return i==="close"?new e.prototype.deps.OO.ui.Process((function(){this.close()}).bind(this)):this._modal.events[i]?new e.prototype.deps.OO.ui.Process((function(){r.forEach(function(h){h()},this)}).bind(this)):o.getActionProcess.call(this,i)},this._modal=new t({classes:this.classes,id:this.id,modal:this,size:this.size}),n._windowManager.addWindows([this._modal]),this._modal.$frame.parent().prepend(a("<div>",{class:"oo-ui-window-backdrop"})),this._modal.$frame.prev().click((function(i){a(i.target).parent().attr("id")===this.id&&this._modal.close()}).bind(this)),this._loading.resolve(this),this._loading},e.prototype._close=function(){return this._modal=null,this.create(),this.closeFunc?this.closeFunc.bind(this.context)():!0},e.prototype._created=function(t){this._modal=t;for(var o in this.events)for(var i=0,r=this.events[o].length;i<r;++i)t.bind(o,this.events[o][i]);this._loading.resolve(this)},e.prototype.show=function(){if(this.wScrollTop=a(window).scrollTop(),this._modal)n._windowManager.openWindow(this._modal);else if(this._loading)this._loading.then((function(){this._modal.show()}).bind(this));else throw new Error("Modal not created!")},e.prototype.close=function(){if(this._modal)this._modal.close();else throw new Error("Modal not created!")},e.prototype.hide=e.prototype.close,l.loader.using(["oojs","oojs-ui","oojs-ui-windows"]).then(function(){e.prototype.deps.OO=OO,n.Modal=e,n.ModalButton=s,n._init=c,window.dev.modal=n,c()})})()},{css:[".oo-ui-windowManager-modal>.oo-ui-dialog>.oo-ui-window-backdrop{height:100%;inset:0;position:fixed;width:100%;z-index:-1}.oo-ui-windowManager-modal.oo-ui-windowManager-floating>.oo-ui-dialog>.oo-ui-window-frame{min-height:148px}.oo-ui-window-content.oo-ui-processDialog-content .oo-ui-window-body{padding:8px 19px}.oo-ui-windowManager-modal>.oo-ui-dialog>.oo-ui-window-frame{color-scheme:auto}.oo-ui-windowManager-modal>.oo-ui-dialog>.oo-ui-window-frame hr{border:none;border-bottom:1px solid var( --theme-border-color )}"]},{},{},null]})})(mediaWiki);
