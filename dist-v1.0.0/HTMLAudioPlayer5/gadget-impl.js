(function(L){L.loader.getState("ext.gadget.store.FandoomUtilsI18nLoader")===null&&L.loader.load("https://cdn.jsdelivr.net/gh/ccxtwf/MirahezeDevScripts@dist/dist@1.0.0/FandoomUtilsI18nLoader/gadget-impl.js"),L.loader.impl(function(){return["ext.gadget.store.HTMLAudioPlayer5@a0bcdd60",function(b,H,q,z){(function(s){"use strict";var N;function C(r){r[0].querySelectorAll(".html5audio:not(.loaded)").forEach(function(a){var t=a.dataset,n=[],c=[];for(var v in t)if(v.startsWith("file")){var x=v.substring(4),M=parseInt(x.substring(1))||(x===""?0:null);M!=null&&(n[M]=t[v])}n=n.filter(function(i){return i});for(var u=0;u<n.length;u++){var D=n[u],o;if(o=t["fileType"+(u>0?"-"+u:"")],!o){var l=n[u],F=l.lastIndexOf("?");F!=-1&&(l=l.substring(0,F));var m=l.lastIndexOf(".");m!=-1&&l.length-(m+1)<=4&&(o=l.substring(m+1))}o&&o.length>0&&(o=="mp3"&&(o="mpeg"),o.startsWith("audio/")||(o="audio/"+o));var h=document.createElement("source");h.src=D,o&&(h.type=o),c.push(h)}if(c.length!=0){var p=t.preload,O=t.download,T=t.options,f={controls:""},y=Number(Number(t.volume).toFixed(1)),I=parseFloat(t.start),P=parseFloat(t.end),g=parseFloat(t.repeatStart),d=parseFloat(t.repeatEnd);if(p!=="auto"&&p!=="metadata"&&(p="none"),f.preload=p,O==="false"&&(f.controlsList="nodownload"),T){var S=["autoplay","loop","muted"];T.split(",").forEach(function(i){i=i.trim(),S.indexOf(i)!==-1&&(f[i]="")})}var e=document.createElement("audio");if(Object.keys(f).forEach(function(i){var V=f[i];e.setAttribute(i,V)}),isNaN(I)||(e.currentTime=I),!isNaN(P)){var U=function(){e.currentTime>=P&&(e.seeking||e.pause(),e.removeEventListener("timeupdate",U))};e.addEventListener("timeupdate",U)}if(!isNaN(g)||!isNaN(d)){(isNaN(g)||g<0)&&(g=0),e.addEventListener("loadedmetadata",function(){(isNaN(d)||d>e.duration)&&(d=e.duration),g==0&&d==e.duration?(e.removeEventListener("timeupdate",k),e.removeEventListener("seeking",A),e.removeEventListener("ended",_),e.setAttribute("loop",""),E=!1):d>e.duration-.25&&e.removeAttribute("loop")});var E=!0,k=function(){E&&(e.paused&&!e.ended||e.currentTime>=d&&(e.currentTime=g))},A=function(){E=e.currentTime<d},_=function(){e.play()};e.addEventListener("ended",_),e.addEventListener("timeupdate",k),e.addEventListener("seeking",A)}Element.prototype.replaceChildren.apply(e,c),e.append(N("text").escape()),y>=0&&y<=1&&(e.volume=y),a.innerHTML="",a.appendChild(e),a.classList.add("loaded")}})}function W(r){var a=s.Message;a.prototype.constructor=s.Message.prototype.constructor;var t={_i18nLoader:r,msg:function(){var n=Array.prototype.slice.call(arguments);if(n.length!==0){var c=n.shift();return new a(this._i18nLoader.getMessages(),c,n)}}};return["setTempLang","setDefaultLang"].forEach(function(n){t[n]=t._i18nLoader[n].bind(t._i18nLoader)}),["useLang","usePageLang","useContentLang","usePageViewLang","useUserLang","inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(n){t[n]=t._i18nLoader[n].bind(t)}),t}function j(){var r=new b.Deferred;return s.loader.using("ext.gadget.store.FandoomUtilsI18nLoader").done(function(a){var t=a("ext.gadget.store.FandoomUtilsI18nLoader");t.loadMessages("HTMLAudioPlayer5",{}).done(function(n){if(!n){r.resolve(w());return}r.resolve(n)})}).fail(function(a){console.error(a),r.resolve(w())}),r}function w(){console.warn("[FandoomUtilsI18nLoader] Failed to load messages. Using fallback messages instead.");var r=new s.Map;r.set({text:"Your browser does not support the &lt;audio&gt; tag."}),s.Message.prototype.escape===void 0&&(s.Message.prototype.escape=s.Message.prototype.escaped);var a={getMessages:function(){return r}};return["setDefaultLang","setTempLang","useLang","usePageLang","useContentLang","usePageViewLang","useUserLang"].forEach(function(t){a[t]=b.noop}),["inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(t){a[t]=function(){return this}}),a}j().then(function(r){var a=W(r);N=a.msg.bind(a),s.hook("wikipage.content").add(C)})})(window.mediaWiki)},{css:[]},{},{},null]})})(mediaWiki);
