(function(l){l.loader.getState("ext.gadget.store.FandoomUtilsI18nLoader")===null&&l.loader.load("https://cdn.jsdelivr.net/gh/ccxtwf/MirahezeDevScripts@dist/dist@1.0.0/FandoomUtilsI18nLoader/gadget-impl.js"),l.loader.impl(function(){return["ext.gadget.store.Countdown@5499c7d1",function(P,w,C,D){(function(h,r,i){"use strict";var s=[],p=1,f=2,L=4,u;function c(o,n,e){var t=e?o+"-short":r.language.convertPlural(n,[o,o+"s",o+"s2"]),a=u.msg(t).plain();return e?a:" "+a}function g(o,n){var e,t,a=[],d=!!(s[o].opts&f);if(e=n%60,t=c("second",e,d),a.unshift(e+t),n=Math.floor(n/60),e=n%60,t=c("minute",e,d),a.unshift(e+t),n=Math.floor(n/60),e=n%24,t=c("hour",e,d),a.unshift(e+t),n=Math.floor(n/24),t=c("day",n,d),a.unshift(n+t),t=a.pop(),s[o].opts&p)for(;a.length&&a[0][0]==="0";)a.shift();s[o].opts&L&&(a=a.filter(function(k){return k[0]!=="0"})),a.length&&(s[o].opts&f?t=a.join(" ")+" "+t:t=a.join(", ")+" "+u.msg("and").plain()+" "+t),s[o].node.text(t)}function y(o){var n=s[o].node.parents(".countdown").first();switch(n.attr("data-end")){case"remove":return n.remove(),!0;case"stop":return g(o,0),!0;case"toggle":var e=n.attr("data-toggle");if(e&&e==="next")return n.next().css("display","inline"),n.css("display","none"),!0;if(e&&i(e).length)return i(e).css("display","inline"),n.css("display","none"),!0;break;case"callback":var t=n.attr("data-callback");if(t&&i.isFunction(h[t]))return g(o,0),h[t].call(n),!0;break}return s[o].countup=!0,g(o,0),!1}function m(){var o=Date.now(),n=[];i.each(s.slice(0),function(t,a){var d=Math.floor((a.date-o)/1e3);d<=0&&!a.countup?y(t)&&n.push(t):g(t,Math.abs(d))});for(var e;(e=n.pop())!==void 0;)s.splice(e,1);s.length&&window.setTimeout(function(){m()},1e3)}function M(o){var n=o.parents(".countdown").first(),e=n.attr("data-options"),t=0;return e&&(/no-leading-zeros/.test(e)&&(t|=p),/short-format/.test(e)&&(t|=f),/no-zeros/.test(e)&&(t|=L)),t}function b(){var o=i("body").find(".countdown:not(.handled)");o.length&&(i("body").find(".nocountdown").css("display","none"),o.css("display","inline").find(".countdowndate").each(function(){var n=i(this),e=new Date(n.text()).valueOf();if(isNaN(e)){n.text(u.msg("bad-date").plain());return}s.push({node:n,opts:M(n),date:e})}),o.addClass("handled"),s.length&&m())}U().done(function(o){u=x(o),r.hook("wikipage.content").add(b)});function x(o){var n=r.Message;n.prototype.constructor=r.Message.prototype.constructor;var e={_i18nLoader:o,msg:function(){var t=Array.prototype.slice.call(arguments);if(t.length!==0){var a=t.shift();return new n(this._i18nLoader.getMessages(),a,t)}}};return["setTempLang","setDefaultLang"].forEach(function(t){e[t]=e._i18nLoader[t].bind(e._i18nLoader)}),["useLang","usePageLang","useContentLang","usePageViewLang","useUserLang","inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(t){e[t]=e._i18nLoader[t].bind(e)}),e}function U(){var o=new i.Deferred;return r.loader.using("ext.gadget.store.FandoomUtilsI18nLoader").done(function(n){var e=n("ext.gadget.store.FandoomUtilsI18nLoader");e.loadMessages("Countdown",{}).done(function(t){if(!t){o.resolve(v());return}t.useContentLang(),o.resolve(t)})}).fail(function(n){console.error(n),o.resolve(v())}),o}function v(){console.warn("[FandoomUtilsI18nLoader] Failed to load messages. Using fallback messages instead.");var o=new r.Map;o.set({and:"and",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days","bad-date":"Invalid Date","second-short":"s","minute-short":"m","hour-short":"h","day-short":"d",seconds2:"seconds",minutes2:"minutes",hours2:"hours",days2:"days"}),r.Message.prototype.escape===void 0&&(r.Message.prototype.escape=r.Message.prototype.escaped);var n={getMessages:function(){return o}};return["setDefaultLang","setTempLang","useLang","usePageLang","useContentLang","usePageViewLang","useUserLang"].forEach(function(e){n[e]=i.noop}),["inLang","inPageLang","inContentLang","inPageViewLang","inUserLang"].forEach(function(e){n[e]=function(){return this}}),n}})(window.countdownTimer=window.countdownTimer||{},mediaWiki,w)},{css:[]},{},{},null]})})(mediaWiki);
